<div class="business-engine-studio" data-bs-theme="dark">
    <!------------------------------------>
    <!--Begin Menu Bar-->
    <!------------------------------------>
    <div class="menu-bar"></div>
    <!------------------------------------>
    <!--End Menu Bar-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Activity Bar-->
    <!------------------------------------>
    <div class="activity-bar">
        <div class="top-actions">
            <ul class="actions-container">
                <li class="action-item" ng-repeat="item in $.$rootScope.activityBarItems | filter:{visible:true}"
                    ng-class="{'active':item.name==$.$rootScope.currentActivityBar}">
                    <a class="action-label" role="button" title="{{item.title}}" b-custom-tooltip
                        data-bs-placement="right" ng-click="$.onActivityBarItemClick(item.name)">
                        <i class="codicon codicon-{{item.icon}}"></i>
                    </a>
                </li>
            </ul>
        </div>
        <div class="user-actions">
            <ul class="actions-container">
                <li class="action-item" ng-click="$.onClearChaceClick()">
                    <a class="action-label" role="button" b-custom-tooltip data-bs-placement="right"
                        title="Clear Chache & Inc Version">
                        <i class="codicon codicon-issue-reopened" ng-class="{'spin':$.running=='clear-cache'}"></i>
                    </a>
                </li>
                <li class="action-item">
                    <a class="action-label" role="button" b-custom-tooltip data-bs-placement="right" title="Settings">
                        <i class="codicon codicon-settings-gear"></i>
                    </a>
                </li>
                <li class="action-item">
                    <a class="action-label" href="/Default.aspx?tabid={{$.returnUrl}}" role="button" b-custom-tooltip
                        data-bs-placement="right" title="Return to the dnn page you came">
                        <i class="codicon codicon-sign-in"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <!------------------------------------>
    <!--End Activity Bar-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Side Bar-->
    <!------------------------------------>
    <div class="sidebar">
        <!------------------------------------>
        <!-- Sidebar Explorer Widget-->
        <!------------------------------------>
        <b-sidebar-explorer ng-if="$.$rootScope.currentActivityBar=='explorer' && $.$rootScope.explorerItems">
        </b-sidebar-explorer>
    </div>
    <!------------------------------------>
    <!--End Side Bar-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Workspace Panel-->
    <!------------------------------------>
    <div class="workspace-panel">
        <!------------------------------------>
        <!--Top bar tabs-->
        <!------------------------------------>
        <div class="top-bar-tabs" id="workspaceTabs">
            <ul class="nav nav-tabs">
                <li class="nav-item" role="presentation" ng-repeat="tab in $.$rootScope.tabs track by tab.key"
                    ng-click="$.onTabClick(tab)">
                    <a class="nav-link text-secondary" ng-class="{'active':tab.key == $.$rootScope.currentTab.key}"
                        role="tab">
                        <i class="codicon codicon-{{tab.icon}} item-icon b-{{tab.moduleType}}-icon"></i>
                        {{tab.title}}
                        <i ng-if="tab.isChanged" class="codicon codicon-circle-filled change-tab-icon"></i>
                        <i ng-if="!tab.isChanged" class="codicon codicon-chrome-close close-icon" role="button"
                            ng-click="$.onCloseTabClick(tab.key,$event)"></i>
                    </a>
                </li>
                <li class="nav-item more-item" ng-if="$.$rootScope.tabs.length">
                    <div class="btn-group mt-1">
                        <button type="button" class="more-button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="codicon codicon-kebab-vertical"></i>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" ng-click="$.onCloseAllTabsClick()">Close All Tabs</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
            <div id="pnlShortcutSection" class="top-bar-more-menu"></div>
        </div>
        <!------------------------------------>
        <!-- Tabs Content-->
        <!------------------------------------>
        <div class="tab-content " id="workspaceTabsContent">
            <div class="tab-pane fade show active" role="tabpanel" ng-repeat="tab in $.$rootScope.tabs track by tab.key"
                ng-show="tab.key == $.$rootScope.currentTab.key">
                <div class="widget-body" ng-if="tab.isLoaded" ng-include="tab.content"> </div>
            </div>
        </div>
    </div>
    <!------------------------------------>
    <!--End Workspace Panel-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Status Bar-->
    <!------------------------------------>
    <div class="status-bar">
        <!-- موقت و نیاز به جابجایی  -->
        <!-- <b-widget-quick-input items="$.$rootScope.scenarios" item-Title="ScenarioTitle" item-Subtitle="ScenarioName" item-icon="archive" search-placeholder="Select a scenario"></b-widget-quick-input> -->

        <b-widget-quick-input items="$.$rootScope.scenarios" item-Title="ScenarioTitle" item-Subtitle="ScenarioName"
            item-icon="archive" search-placeholder="Select a scenario"></b-widget-quick-input>
        <div class="active-scenario">
            <span class="scenario-link small text-white d-flex justify-content-end me-2 pe-none"
                ng-click="$.onSelectScenarioClick()">Scenario : {{$.$rootScope.scenario.ScenarioName}}</span>
        </div>
    </div>
    <!------------------------------------>
    <!--End Status Bar-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Notifications-->
    <!------------------------------------>
    <div id="bNotifications" class="notifications"> </div>
    <!------------------------------------>
    <!--End Notifications-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Action Center Widget-->
    <!------------------------------------>
    <div class="action-center-widget" ng-class="{'show-widget':$.showActionCenterWidget}">
        <div class="header-wrapper">
            <label class="title">Action Center</label>
            <span class="hide-widget" ng-click="$.onHideActionCenterWidgetClick()" role="button">
                <i class="codicon codicon-chrome-minimize"></i>
            </span>
        </div>
        <ul class="task-list">
            <li ng-repeat="task in $.actionCenterTasks" class="task-item-wrapper animate__animated animate__backInUp">
                <div class="task-item" ng-class="{'animate__fadeOutDown':item.status=='completed'}">
                    <i class="task-icon {{task.icon}}" ng-class="{'shine-small':item.status=='running'}"></i>
                    <div class="task-title-wrapper">
                        <h5 class="task-title">{{task.title}}</h5>
                        <span class="task-subtitle">{{task.subtitle}}</span>
                    </div>
                    <div class="task-actions" ng-if="task.actions && task.actions.length">
                        <button type="button" ng-repeat="action in task.actions" ng-click="action.callback()"
                            class="b-btn btn-sm btn-task-action {{action.buttonCssClass}}">
                            {{action.text}}
                            <span ng-if="action.timer">({{action.timer}})</span>
                        </button>
                    </div>
                </div>
                <div class="action-progress-wrapper">
                    <div class="action-progress-bar" style="width:{{task.percent}}%"></div>
                </div>
                <p ng-if="task.message" class="task-messages">{{task.message}}</p>
                <div ng-if="task.link" class="mt-2">
                    <a href="{{task.link}}" class="b-btn btn-action" target="_blank">Download Export</a>
                </div>
            </li>
        </ul>
    </div>
    <!------------------------------------>
    <!--End Action Center Widget-->
    <!------------------------------------>

    <!------------------------------------>
    <!--Begin Select Scenario-->
    <!------------------------------------>
    <div id="wnSelectScenario" b-custom-modal class="modal fade b-modal-dark" tabindex="-1" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Select Scenario</h5>
                </div>
                <div class="modal-body">
                    <div class="b-field">
                        <label class="form-label">Scenario</label>
                        <div class="b-input-group">
                            <select ng-model="$.scenarioId" class="b-input form-select"
                                ng-options="scenario.Id as scenario.ScenarioTitle for scenario in $.$rootScope.scenarios"
                                ng-disabled="$.running" chosen inherit-select-classes="true"
                                placeholder-text-single="'Select scenario'" required>
                            </select>
                            <span><i class="codicon codicon-activate-breakpoints"></i></span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="b-btn btn-action btn-sm me-auto" ng-click="$.onAddScenarioClick()"
                        b-custom-tooltip title="Add New Scenario" ng-disabled="$.running">
                        <i class="codicon codicon-plus me-0"></i>
                    </button>
                    <button type="button" class="b-btn btn-text-icon btn-submit me-2"
                        ng-click="$.onSelectScenarioClick()" ng-disabled="$.running || !$.scenarioId">
                        <i class="codicon codicon-save"></i>
                        Select Scenario
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!------------------------------------>
    <!--End Select Scenario-->
    <!------------------------------------>
</div>