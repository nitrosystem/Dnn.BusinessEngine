<div class="field-settings" data-bs-theme="dark">
    <!------------------------------------>
    <!--Field Id & Field Name-->
    <!------------------------------------>
    <div class="b-field">
        <label class="form-label">Field Id</label>
        <input type="text" ng-model="$.currentField.Id" class="b-input form-control" readonly></label>
    </div>
    <div class="b-field">
        <label class="form-label">Fied Name</label>
        <div class="b-input-group">
            <input type="text" ng-model="$.currentField.FieldName" class="b-input form-control"
                placeholder="Enter field name"
                onkeypress="return (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122) || (event.charCode >= 48 && event.charCode <= 57)" />
            <span><i class="codicon codicon-gear"></i></span>
        </div>
    </div>
    <div class="b-field">
        <label class="form-label">Field Type</label>
        <div class="d-flex mb-2">
            <div class="col-9">
                <div class="b-input-group">
                    <select ng-model="$.currentField.FieldTypeBackup" class="b-input form-select"
                        ng-options="fieldType.FieldType as fieldType.Title for fieldType in $.fieldTypes" chosen
                        inherit-select-classes="true" placeholder-text-multiple="'Select field type'" required>
                        <option disabled></option>
                    </select>
                    <span><i class="codicon codicon-gear"></i></span>
                </div>
            </div>
            <div class="col-auto">
                <button type="button" class="b-btn btn-action btn-sm h-100 ms-1"
                    ng-click="$.onChangeFieldTypeClick($event)" b-custom-tooltip title="Apply Change Field Type"
                    data-bs-placement="bottom" ng-disabled="$.currentField.FieldType==$.currentField.FieldTypeBackup"
                    b-adjective-class="$.currentField.FieldTypeBackup" adjective-class="shine2">
                    <i class="codicon codicon-check-all"></i>
                </button>
            </div>
        </div>
        <div ng-show="$.currentField.FieldType!==$.currentField.FieldTypeBackup"
            class="b-notify notify-info notify-sm mb-2" b-adjective-class="$.currentField.FieldTypeBackup"
            adjective-class="shine-small" adjective-delay="1000">
            <i class="codicon codicon-info b-icon-2"></i>
            <div class="text">
                <h6 class="label text-uppercase">Important Note!</h6>
                <div class="subtext">
                    Changing the field type is a high-risk operation. This change resets the field settings and may
                    cause problems in executing module actions.
                </div>
            </div>
        </div>
    </div>
    <div class="b-field" ng-if="$.currentField.CanHaveValue">
        <label class="form-label d-block">Data Property</label>
        <div id="monacoFieldValueProperty" monaco-editor ng-model="$.currentField.FieldValueProperty"
            data-language="bProperties" data-one-line="true" b-custom-focus="onFocusFieldValueProperty"
            data-suggestions="$.variablesAsFieldValueProperty" data-disable-functions="true" required>
        </div>
    </div>
    <div ng-if="!$.currentField.FieldTypeObject.IsContentField">
        <hr>
        <!------------------------------------>
        <!--Basic Settings-->
        <!------------------------------------>
        <div class="b-group group-sm">
            <div class="group-header" data-bs-toggle="collapse" data-bs-target="#grpBasicSettings"
                ng-class="{'collapsed':$.collapsedComponentGroups}">
                <h3 class="group-label">
                    <span class="group-icon">
                        <i class="codicon codicon-server-process"></i>
                    </span> Basic Settings
                </h3>
                <span class="group-collapse">
                    <i class="codicon codicon-chevron-up"></i>
                </span>
            </div>
            <div id="grpBasicSettings" class="group-content collapse" ng-class="{'show':!$.collapsedComponentGroups}">
                <div class="b-field">
                    <label class="form-label">Disable Layout</label>
                    <label class="b-switch d-block">
                        <input type="checkbox" ng-model="$.currentField.Settings.IsDisabledLayout"
                            ng-change="$.onIsCustomFieldLayoutChange()" />
                        <span class="slider"></span>
                    </label>
                </div>
                <div ng-if="!$.currentField.Settings.IsDisabledLayout">
                    <div class="b-field">
                        <label class="form-label">Hide Field Text</label>
                        <label class="b-switch d-block">
                            <input type="checkbox" ng-model="$.currentField.Settings.IsHiddenFieldText">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="b-field" ng-if="!$.currentField.Settings.IsHiddenFieldText">
                        <label class="form-label">Field Text(Label)</label>
                        <div class="b-input-group">
                            <input type="text" ng-model="$.currentField.FieldText" class="b-input form-control"
                                placeholder="Enter the field label(optional)"
                                ng-disabled="$.currentField.Settings.IsHiddenFieldText" />
                            <span><i class="codicon codicon-gear"></i></span>
                        </div>
                    </div>
                    <div class="b-field">
                        <label class="form-label">Field Subtext(Hint)</label>
                        <textarea ng-model="$.currentField.Settings.Subtext" class="b-input form-control mb-1"
                            placeholder="Enter the field sub text(optional)"></textarea>
                        <p class="b-notify notify-small">If the subtext is empty, no element will be created</p>
                    </div>
                    <div ng-if="$.currentField.CanHaveValue">
                        <div class="b-field">
                            <label class="form-label">Is Required Field</label>
                            <label class="b-switch d-block">
                                <input type="checkbox" ng-model="$.currentField.IsRequired">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div ng-if="$.currentField.IsRequired">
                            <div class="b-field">
                                <label class="form-label">Required Message</label>
                                <input type="text" ng-model="$.currentField.Settings.RequiredMessage"
                                    ng-disabled="!$.currentField.IsRequired" class="b-input form-control"
                                    placeholder="Required message" />
                            </div>
                        </div>
                        <div class="b-field">
                            <label class="form-label">Enable Validation Pattern</label>
                            <label class="b-switch d-block">
                                <input type="checkbox" ng-model="$.currentField.Settings.EnableValidationPattern">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div ng-if="$.currentField.Settings.EnableValidationPattern">
                            <div class="b-field">
                                <label class="form-label">Validation Pattern</label>
                                <textarea ng-model="$.currentField.Settings.ValidationPattern"
                                    class="b-input form-control" placeholder="Validation pattern"
                                    ng-disabled="!$.currentField.Settings.EnableValidationPattern"
                                    ng-required="$.currentField.Settings.EnableValidationPattern"></textarea>
                            </div>
                            <div class="b-field">
                                <label class="form-label">Validation Message</label>
                                <textarea ng-model="$.currentField.Settings.ValidationMessage"
                                    class="b-input form-control" placeholder="Validation message"
                                    ng-disabled="!$.currentField.Settings.EnableValidationPattern"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="b-field">
                    <label class="form-label">Hidden Conditions</label>
                    <div monaco-editor ng-model="$.currentField.HiddenConditions" data-language="bConditionalExpressions"
                        data-height="50px" data-suggestions="$.objects">
                    </div>
                </div>
            </div>
        </div>
        <!------------------------------------>
        <!--Appearance Settings-->
        <!------------------------------------>
        <div class="b-group group-sm">
            <div class="group-header" data-bs-toggle="collapse" data-bs-target="#grpAppearanceSettings"
                ng-class="{'collapsed':$.collapsedComponentGroups}">
                <h3 class="group-label">
                    <span class="group-icon">
                        <i class="codicon codicon-server-process"></i>
                    </span> Appearance Settings
                </h3>
                <span class="group-collapse">
                    <i class="codicon codicon-chevron-up"></i>
                </span>
            </div>
            <div id="grpAppearanceSettings" class="group-content collapse"
                ng-class="{'show':!$.collapsedComponentGroups}">
                <div class="b-field">
                    <label class="form-label">Field Template & Theme</label>
                    <div class="b-input field-settings-more-item" role="button" ng-click="$.onShowFieldTemplateClick()">
                        <i class="codicon codicon-preview"></i>
                        <span>{{$.currentField.Template}}</span>
                        <span ng-if="$.currentField.Template && $.currentField.Theme">&nbsp|&nbsp</span>
                        <span>{{$.currentField.Theme}}</span>
                        <label>...</label>
                    </div>
                </div>
                <div ng-if="!$.currentField.Settings.IsDisabledLayout">
                    <div class="b-field">
                        <label class="form-label">Set Custom Layout</label>
                        <label class="b-switch d-block">
                            <input type="checkbox" ng-model="$.currentField.Settings.IsCustomFieldLayout"
                                ng-change="$.onIsCustomFieldLayoutChange()" />
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="b-field" ng-if="$.currentField.Settings.IsCustomFieldLayout">
                        <label class="form-label">Custom Field Layout Html</label>
                        <div monaco-editor ng-model="$.currentField.Settings.CustomFieldLayout" class="mb-2"
                            data-language="html" data-height="190px" ng-change="$.onCustomFieldLayoutChange()"
                            ng-required="$.currentField.Settings.IsCustomFieldLayout">
                        </div>
                        <div class="b-btn-group">
                            <button type="button" class="b-btn btn-text-icon btn-action"
                                ng-click="$.onResetCustomFieldLayoutClick()">
                                <i class="codicon codicon-refresh"></i>
                                Reset Default Layout Html
                            </button>
                            <button type="button" class="b-btn btn-action dropdown-toggle dropdown-toggle-split"
                                data-bs-toggle="dropdown" aria-expanded="false"></button>
                            <div class="dropdown-menu b-dropdown-menu">
                                <a class="dropdown-item" href="">
                                    <i class="codicon codicon-layout-sidebar-right me-2"></i> Show & Edit In Right
                                    Widget
                                </a>
                                <a class="dropdown-item" href="">
                                    <i class="codicon codicon-screen-full me-2"></i> Show & Edit In FullScreen
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="b-field">
                    <label class="form-label">Field Custom Styles</label>
                    <input type="text" ng-model="$.currentField.Settings.CustomStyles" class="b-input form-control"
                        placeholder="Field custom css styles " />
                </div>
                <div class="b-field">
                    <label class="form-label">Field Css Class</label>
                    <input type="text" ng-model="$.currentField.Settings.CssClass" class="b-input form-control"
                        placeholder="Field css class" />
                </div>
                <div class="b-field" ng-if="!$.currentField.Settings.IsHiddenFieldText">
                    <label class="form-label">Field Text Css Class</label>
                    <input type="text" ng-model="$.currentField.Settings.FieldTextCssClass" class="b-input form-control"
                        placeholder="Field css class" ng-disabled="$.currentField.Settings.IsHiddenFieldText" />
                </div>
                <div class="b-field" ng-if="$.currentField.Settings.Subtext">
                    <label class="form-label">Field Subtext Css Class</label>
                    <input type="text" ng-model="$.currentField.Settings.SubtextCssClass" class="b-input form-control"
                        placeholder="Field subtext css class" ng-disabled="!$.currentField.Settings.Subtext" />
                </div>
                <div class="b-field" ng-if="$.currentField.IsRequired">
                    <label class="form-label">Required Message Css Class</label>
                    <input type="text" ng-model="$.currentField.Settings.RequiredMessageCssClass"
                        class="b-input form-control" placeholder="Field css class"
                        ng-disabled="!$.currentField.IsRequired" />
                </div>
                <div class="b-field" ng-if="$.currentField.Settings.EnableValidationPattern">
                    <label class="form-label">Validation Message Css Class</label>
                    <input type="text" ng-model="$.currentField.Settings.ValidationMessageCssClass"
                        ng-disabled="!$.currentField.Settings.EnableValidationPattern" class="b-input form-control"
                        placeholder="Field css class" ng-disabled="!$.currentField.Settings.EnableValidationPattern" />
                </div>
                <div class="b-field">
                    <label class="form-label">Pane Name</label>
                    <input type="text" ng-model="$.currentField.PaneName" class="b-input form-control"
                        placeholder="Field pane name" readonly />
                </div>
                <div class="b-field">
                    <label class="form-label">View Order</label>
                    <input type="number" ng-model="$.currentField.ViewOrder" class="b-input form-control"
                        placeholder="View order in pane" />
                </div>
            </div>
        </div>
        <!------------------------------------>
        <!--Advanced Settings-->
        <!------------------------------------>
        <div class="b-group group-sm">
            <div class="group-header" data-bs-toggle="collapse" data-bs-target="#grpAdvancedSettings"
                ng-class="{'collapsed':$.collapsedComponentGroups}">
                <h3 class="group-label">
                    <span class="group-icon">
                        <i class="codicon codicon-server-process"></i>
                    </span> Advanced Settings
                </h3>
                <span class="group-collapse">
                    <i class="codicon codicon-chevron-up"></i>
                </span>
            </div>
            <div id="grpAdvancedSettings" class="group-content collapse"
                ng-class="{'show':!$.collapsedComponentGroups}">
                <div class="b-field" ng-if="$.currentField.CanHaveValue">
                    <label class="form-label">Conditional Value(s)</label>
                    <button type="button" class="b-input field-settings-more-item" role="button"
                        ng-click="$.onShowConditionalValuesClick()" ng-disabled="!$.currentField.CanHaveValue">
                        <i class="codicon codicon-checklist"></i>
                        <span ng-if="!$.currentField.ConditionalValues.length">No Value</span>
                        <span ng-if="$.currentField.ConditionalValues.length"
                            class="fs09-rem">{{$.currentField.ConditionalValues[0].ValueExpression}}...</span>
                        <label>...</label>
                    </button>
                </div>
                <div ng-if="$.currentField.ParentId" class="b-field opacity-50">
                    <label class="form-label">Parent</label>
                    <select ng-model="$.currentField.ParentId" class="b-input form-select" chosen
                        inherit-select-classes="true"
                        ng-options="field.Id as field.FieldName for field in $.fields | filter: {IsGroupField:true}"
                        disabled>
                    </select>
                </div>
            </div>
        </div>
        <!------------------------------------>
        <!--Field Custom Settings-->
        <!------------------------------------>
        <div ng-if="$.currentField.CustomSettings" class="b-group group-sm">
            <div class="group-header" data-bs-toggle="collapse" data-bs-target="#grpFieldCustomSettings"
                ng-class="{'collapsed':$.collapsedComponentGroups}">
                <h3 class="group-label">
                    <span class="group-icon">
                        <i class="codicon codicon-server-process"></i>
                    </span> Field Custom Settings
                </h3>
                <span class="group-collapse">
                    <i class="codicon codicon-chevron-up"></i>
                </span>
            </div>
            <div id="grpFieldCustomSettings" class="group-content collapse"
                ng-class="{'show':!$.collapsedComponentGroups}">
                <div ng-include="$.currentField.CustomSettings"></div>
            </div>
        </div>
    </div>
    <hr>
    <!------------------------------------>
    <!--Action Buttons-->
    <!------------------------------------>
    <div class="mb-5 d-flex justify-content-end mt-auto">
        <button type="button" class="b-btn btn-text-icon btn-submit me-2" ng-click="$.onSaveFieldClick($event)"
            ng-disabled="$.running">
            <i class="codicon codicon-save" ng-class="{'loading-circle mini':$.running=='save-action'}"></i>
            Save
        </button>
        <button type="button" class="b-btn btn-text-icon btn-cancel" ng-click="$.onCancelFieldClick()"
            ng-disabled="$.running">
            <i class="codicon codicon-circle-slash"></i>
            Cancel
        </button>
    </div>
</div>